"use strict";(self.webpackChunkAppointent_App=self.webpackChunkAppointent_App||[]).push([[603],{4603:(Y,d,m)=>{m.r(d),m.d(d,{AppointmentFormModule:()=>Q});var l=m(6895),o=m(433),s=m(2019),u=m(7818),f=m(5973),h=m(7579),t=m(8256),A=m(2646),g=m(1265);function _(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1,"This field is required"),t.qZA())}function v(n,i){if(1&n&&(t.TgZ(0,"div",17),t.YNc(1,_,2,0,"div",18),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.Bookingform.controls.AppointmentTime.errors?null:e.Bookingform.controls.AppointmentTime.errors.required)}}function C(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1,"Invalid email"),t.qZA())}function x(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1,"This field is required"),t.qZA())}function T(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1,"Must be longer than 5 characters"),t.qZA())}function k(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1,"Must be shorter than 30 characters"),t.qZA())}function N(n,i){if(1&n&&(t.TgZ(0,"div",17),t.YNc(1,C,2,0,"div",18),t.YNc(2,x,2,0,"div",18),t.YNc(3,T,2,0,"div",18),t.YNc(4,k,2,0,"div",18),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.Bookingform.controls.ClientEmail.errors?null:e.Bookingform.controls.ClientEmail.errors.email),t.xp6(1),t.Q6J("ngIf",null==e.Bookingform.controls.ClientEmail.errors?null:e.Bookingform.controls.ClientEmail.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.Bookingform.controls.ClientEmail.errors?null:e.Bookingform.controls.ClientEmail.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==e.Bookingform.controls.ClientEmail.errors?null:e.Bookingform.controls.ClientEmail.errors.maxlength)}}function F(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1,"This field is required"),t.qZA())}function I(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1,"Must be longer than 8 characters"),t.qZA())}function Z(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1,"No special characters"),t.qZA())}function b(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1,"Must be shorter than 35 characters"),t.qZA())}function B(n,i){if(1&n&&(t.TgZ(0,"div",17),t.YNc(1,F,2,0,"div",18),t.YNc(2,I,2,0,"div",18),t.YNc(3,Z,2,0,"div",18),t.YNc(4,b,2,0,"div",18),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.Bookingform.controls.ClientFirstName.errors?null:e.Bookingform.controls.ClientFirstName.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.Bookingform.controls.ClientFirstName.errors?null:e.Bookingform.controls.ClientFirstName.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==e.Bookingform.controls.ClientFirstName.errors?null:e.Bookingform.controls.ClientFirstName.errors.pattern),t.xp6(1),t.Q6J("ngIf",null==e.Bookingform.controls.ClientFirstName.errors?null:e.Bookingform.controls.ClientFirstName.errors.maxlength)}}function M(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1,"This field is required"),t.qZA())}function q(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1,"Must be longer than 8 characters"),t.qZA())}function O(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1,"No special characters"),t.qZA())}function P(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1,"Must be shorter than 35 characters"),t.qZA())}function y(n,i){if(1&n&&(t.TgZ(0,"div",17),t.YNc(1,M,2,0,"div",18),t.YNc(2,q,2,0,"div",18),t.YNc(3,O,2,0,"div",18),t.YNc(4,P,2,0,"div",18),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.Bookingform.controls.ClientLastName.errors?null:e.Bookingform.controls.ClientLastName.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.Bookingform.controls.ClientLastName.errors?null:e.Bookingform.controls.ClientLastName.errors.minlength),t.xp6(1),t.Q6J("ngIf",null==e.Bookingform.controls.ClientLastName.errors?null:e.Bookingform.controls.ClientLastName.errors.pattern),t.xp6(1),t.Q6J("ngIf",null==e.Bookingform.controls.ClientLastName.errors?null:e.Bookingform.controls.ClientLastName.errors.maxlength)}}function w(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1,"This field is required"),t.qZA())}function U(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1,"Must be at least than 10 digits and No special characters"),t.qZA())}function E(n,i){if(1&n&&(t.TgZ(0,"div",17),t.YNc(1,w,2,0,"div",18),t.YNc(2,U,2,0,"div",18),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",null==e.Bookingform.controls.ClientPhone.errors?null:e.Bookingform.controls.ClientPhone.errors.required),t.xp6(1),t.Q6J("ngIf",null==e.Bookingform.controls.ClientPhone.errors?null:e.Bookingform.controls.ClientPhone.errors.pattern)}}function J(n,i){if(1&n&&(t.TgZ(0,"option",19),t._uU(1),t.qZA()),2&n){const e=i.$implicit;t.Q6J("value",e.AppointmentName),t.xp6(1),t.Oqu(e.AppointmentName)}}const S=[{path:"",component:(()=>{class n{constructor(e,r,p){this.fb=e,this.apmnt=r,this.dp=p,this.BlankSlotForBooking=new u.o("","",0,"",null,0),this.AppointmentInfo=new f.u(0,"","","","","","","",0,"",0,0,0),this.ValidAppointment=!1,this.LatestBookingTime="21:00",this.checkingValidity=!1,this.OnNewError=new h.x,this.EarliestDate=this.dp.transform(new Date,"yyyy-MM-dd"),this.Bookingform=this.fb.group({ClientEmail:["",o.kI.compose([o.kI.minLength(5),o.kI.maxLength(30),o.kI.required,o.kI.email])],ClientPhone:["",o.kI.compose([o.kI.required,o.kI.pattern("^[0-9]{10}$")])],ClientFirstName:["",o.kI.compose([o.kI.minLength(4),o.kI.maxLength(30),o.kI.required,o.kI.pattern(/^[a-zA-Z0-9]+$/)])],ClientLastName:["",o.kI.compose([o.kI.minLength(4),o.kI.maxLength(30),o.kI.required,o.kI.pattern(/^[a-zA-Z0-9]+$/)])],AppointmentTime:["",o.kI.compose([o.kI.required])]})}ngOnInit(){this.BlankSlotForBooking=this.apmnt.GetCurrentSlot()}SetAppointmentType(e){this.checkingValidity=!0,this.AppointmentInfo.AppointmentName=e.target.value,this.AppointmentInfo.AppointmentDate=this.BlankSlotForBooking.dateOfSlot;var r=this.apmnt.AvailableAppointments[this.apmnt.AvailableAppointments.findIndex(p=>p.AppointmentName===this.AppointmentInfo.AppointmentName)];this.AppointmentInfo.AppointmentPrice=r.AppointmentPrice,this.AppointmentInfo.AppointmentDurationInMinutes=r.AppointmentDurationInMinutes}SaveChanges(){if(this.checkingValidity)if(this.Bookingform.valid){var e=Math.abs(this.apmnt.GetNewDateFromTime(this.BlankSlotForBooking.EndTime).getTime()-this.apmnt.GetNewDateFromTime(this.BlankSlotForBooking.StartTime).getTime())/6e4;this.AppointmentInfo.AppointmentDurationInMinutes>e?(this.OnNewError.next("The selected appointment type is too long for this time slot"),this.ValidAppointment=!1):this.AppointmentInfo.AppointmentDurationInMinutes<e?(this.LatestBookingTime=this.dp.transform(this.apmnt.GetNewDateFromTime(this.BlankSlotForBooking.EndTime).setMinutes(-this.AppointmentInfo.AppointmentDurationInMinutes),"HH:mm"),this.ValidAppointment=!0):this.AppointmentInfo.AppointmentDurationInMinutes==e&&(this.LatestBookingTime=this.BlankSlotForBooking.StartTime,this.ValidAppointment=!0);var r=this.dp.transform(this.apmnt.GetNewDateFromTime(this.Bookingform.get("AppointmentTime")?.value),"HH:mm"),p=this.apmnt.GetNewDateFromTime(r),a=Math.trunc((this.apmnt.GetNewDateFromTime(this.LatestBookingTime).getTime()-p.getTime())/6e4);if(this.apmnt.GetNewDateFromTime(this.BlankSlotForBooking.EndTime).getTime()<p.getTime())this.OnNewError.next("The selected appointment time later than the selected time slot");else if(p.getTime()<this.apmnt.GetNewDateFromTime(this.BlankSlotForBooking.StartTime).getTime())this.OnNewError.next("The selected appointment time earlier than the selected time slot");else{if(!(a<=0))return this.ValidAppointment=!1,void this.OnNewError.next(`The selected appointment time must be ${a} minutes earlier`);this.AppointmentInfo.AppointmentTime=r,this.Bookingform.valid&&this.ValidAppointment&&(this.AppointmentInfo.isConfirmed=0,this.AppointmentInfo.ClientFirstName=this.Bookingform.get("ClientFirstName")?.value,this.AppointmentInfo.ClientLastName=this.Bookingform.get("ClientLastName")?.value,this.AppointmentInfo.ClientEmail=this.Bookingform.get("ClientEmail")?.value,this.AppointmentInfo.ClientPhone=this.Bookingform.get("ClientPhone")?.value,this.apmnt.CreateAppointment(this.AppointmentInfo).subscribe(c=>{console.log(c)},c=>{this.OnNewError.next(c)}),this.apmnt.OnBlankSlotSelected.next(!1))}}else this.OnNewError.next("Please corrrect your details");else this.OnNewError.next("The please select a valid appointment")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(o.qu),t.Y36(A.H),t.Y36(l.uU))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-appointment-form"]],decls:46,vars:10,consts:[[3,"OnNewError"],[1,"form-wrapper"],[1,"info-text"],[1,"booking-form",3,"formGroup"],[1,"form-group"],["type","time","formControlName","AppointmentTime","required","",1,"InputField",3,"min","max"],["class","alert",4,"ngIf"],["type","text","placeholder","Enter Email","formControlName","ClientEmail","required","",1,"InputField"],["type","text","placeholder","Enter First Name","formControlName","ClientFirstName","required","",1,"InputField"],["type","text","placeholder","Enter Last Name","formControlName","ClientLastName","required","",1,"InputField"],["type","text","placeholder","Enter Phone Number","formControlName","ClientPhone","required","",1,"InputField"],[3,"change"],["value","","disabled","","selected","","hidden",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-buttons"],["type","button","routerLink","/AppointmentsTimetable",1,"cancelbtn"],[1,"signupbtn",3,"click"],[1,"alert"],[4,"ngIf"],[3,"value"]],template:function(e,r){1&e&&(t._UZ(0,"app-error-display",0),t.TgZ(1,"div",1)(2,"span",2),t._uU(3,"Please fill out your details"),t.qZA(),t.TgZ(4,"form",3)(5,"div",4)(6,"label"),t._uU(7,"Appointment Time"),t.qZA(),t._UZ(8,"input",5),t.YNc(9,v,2,1,"div",6),t.qZA(),t.TgZ(10,"div",4)(11,"label")(12,"b"),t._uU(13,"Client Email"),t.qZA()(),t._UZ(14,"input",7),t.YNc(15,N,5,4,"div",6),t.qZA(),t.TgZ(16,"div",4)(17,"label")(18,"b"),t._uU(19,"First Name"),t.qZA()(),t._UZ(20,"input",8),t.YNc(21,B,5,4,"div",6),t.qZA(),t.TgZ(22,"div",4)(23,"label")(24,"b"),t._uU(25,"Last Name"),t.qZA()(),t._UZ(26,"input",9),t.YNc(27,y,5,4,"div",6),t.qZA(),t.TgZ(28,"div",4)(29,"label")(30,"b"),t._uU(31,"Phone"),t.qZA()(),t._UZ(32,"input",10),t.YNc(33,E,3,2,"div",6),t.qZA(),t.TgZ(34,"div",4)(35,"label"),t._uU(36,"Appointment"),t.qZA(),t.TgZ(37,"select",11),t.NdJ("change",function(a){return r.SetAppointmentType(a)}),t.TgZ(38,"option",12),t._uU(39,"-- Select --"),t.qZA(),t.YNc(40,J,2,2,"option",13),t.qZA()(),t.TgZ(41,"div",14)(42,"button",15),t._uU(43,"Cancel"),t.qZA(),t.TgZ(44,"button",16),t.NdJ("click",function(){return r.SaveChanges()}),t._uU(45,"Save"),t.qZA()()()()),2&e&&(t.Q6J("OnNewError",r.OnNewError),t.xp6(4),t.Q6J("formGroup",r.Bookingform),t.xp6(4),t.Q6J("min",r.BlankSlotForBooking.StartTime)("max",r.LatestBookingTime),t.xp6(1),t.Q6J("ngIf",r.checkingValidity),t.xp6(6),t.Q6J("ngIf",r.checkingValidity),t.xp6(6),t.Q6J("ngIf",r.checkingValidity),t.xp6(6),t.Q6J("ngIf",r.checkingValidity),t.xp6(6),t.Q6J("ngIf",r.checkingValidity),t.xp6(7),t.Q6J("ngForOf",r.apmnt.AvailableAppointments))},dependencies:[l.sg,l.O5,s.rH,o._Y,o.YN,o.Kr,o.Fj,o.JJ,o.JL,o.Q7,o.sg,o.u,g.n],styles:[".form-wrapper[_ngcontent-%COMP%]{max-width:600px;margin:30px auto;background-color:#fbeaea;border:1px solid #e8c7c8;border-radius:10px;padding:25px 30px;box-shadow:0 8px 20px #b76e7933;font-family:Segoe UI,sans-serif}.info-text[_ngcontent-%COMP%]{display:block;font-size:1.1em;margin-bottom:20px;color:#4a4a4a}.booking-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:18px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}label[_ngcontent-%COMP%]{margin-bottom:5px;color:#b76e79;font-weight:600}.InputField[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{padding:10px;border:1px solid #e8c7c8;border-radius:6px;font-size:14px;background-color:#fff;transition:border .3s ease}.InputField[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:#b76e79;outline:none}.alert[_ngcontent-%COMP%]{color:#b00020;font-size:12px;margin-top:4px}.form-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}.cancelbtn[_ngcontent-%COMP%], .signupbtn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:8px;font-weight:600;font-size:14px;cursor:pointer;transition:all .3s ease}.cancelbtn[_ngcontent-%COMP%]{background-color:#ffe8e8;color:#b76e79;border:1px solid #b76e79}.signupbtn[_ngcontent-%COMP%]{background-color:#b76e79;color:#fff}.cancelbtn[_ngcontent-%COMP%]:hover{background-color:#fbeaea}.signupbtn[_ngcontent-%COMP%]:hover{background-color:#a35a65}@media (max-width: 768px){.form-wrapper[_ngcontent-%COMP%]{padding:20px;margin:20px}.form-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:10px}.cancelbtn[_ngcontent-%COMP%], .signupbtn[_ngcontent-%COMP%]{width:100%}.InputField[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font-size:16px;padding:12px}}@media (max-width: 480px){.form-wrapper[_ngcontent-%COMP%]{padding:15px}.info-text[_ngcontent-%COMP%]{font-size:1em;text-align:center}label[_ngcontent-%COMP%]{font-size:14px}.cancelbtn[_ngcontent-%COMP%], .signupbtn[_ngcontent-%COMP%]{font-size:15px;padding:12px}}"]}),n})()}];let L=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[s.Bz.forChild(S),s.Bz]}),n})(),Q=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.ez,L,o.UX,g.n]}),n})()}}]);